!function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r;k=b(".wp-list-table.jetpack-modules"),l=b(".navbar-form"),m=b("#srch-term-search-input"),n=b(".jp-frame"),o=b("#doaction"),h=new d.Modules({items:c}),i=new e.List_Table({el:"#the-list",model:h}),h.trigger("change"),j=function(a){b(".subsubsub").find('a[data-title="'+b(this).data("title")+'"]').addClass("current").closest("li").siblings().find("a.current").removeClass("current"),a.preventDefault(),h.trigger("change")},b(".subsubsub a").on("click",{modules:h},j),p=function(a,b){n.children(".modal, .shade").show(),n.children(".modal").data("current-module",a),r(b),n.find(".modal header li.config").show(),c[a].configurable||n.find(".modal header li.config").hide()},q=function(){n.children(".modal, .shade").hide(),n.children(".modal").data("current-module",""),r(null)},r=function(a){switch(n.find(".modal .active").removeClass("active"),a){case"learn-more":n.find(".modal .learn-more a").addClass("active"),n.children(".modal").trigger("learn-more");break;case"config":n.find(".modal .config a").addClass("active"),n.children(".modal").trigger("config")}},n.on("click",".modal header .close, .shade",q),n.on("click",".modal header ul li a",function(a){a.preventDefault(),r(b(this).data("tab"))}),n.children(".modal").on("learn-more",function(){var a=n.children(".modal").data("current-module");b(this).find(".content").html(c[a].long_description)}),n.children(".modal").on("config",function(){var b=n.children(".modal").data("current-module");q(),a.location.href=c[b].configure_url}),k.on("click",".info a",{modules:h},function(a){a.preventDefault(),p(b(this).closest(".jetpack-module").attr("id"),"learn-more")}),k.on("click",".configure a",{modules:h},function(a){a.preventDefault(),p(b(this).closest(".jetpack-module").attr("id"),"config")}),l.on("click",".button-group .button",{modules:h},function(a){a.preventDefault(),b(this).addClass("active").siblings(".active").removeClass("active"),h.trigger("change")}),m.on("keyup search",function(){h.trigger("change")}),m.prop("placeholder",f.search_placeholder),o.on("click",function(c){var d,e=b(".jetpack-modules-list-table-form").serialize(),f=b(this).siblings("select").val();e.length&&"-1"!==f&&(d="admin.php?page=jetpack&action="+encodeURIComponent(f),d+="&"+e,d+="&_wpnonce="+encodeURIComponent(g.bulk),a.location.href=d),c.preventDefault()})}(this,jQuery,window.jetpackModulesData.modules,this.jetpackModules.models,this.jetpackModules.views,window.jetpackModulesData.i18n,window.jetpackModulesData.nonces),this.jetpackModules=this.jetpackModules||{},window.jetpackModules.models=function(a,b,c,d){"use strict";var e={};return e.Modules=d.Model.extend({visibles:{},filter_and_sort:function(){var a,d=b(".subsubsub .current"),e=this.get("raw"),f=b(".button-group.filter-active .active"),g=b(".button-group.sort .active"),h=b("#srch-term-search-input").val().toLowerCase();return d.closest("li").hasClass("all")||(e=c.filter(e,function(a){return c.contains(a.module_tags,d.data("title"))})),f.data("filter-by")&&(e=c.filter(e,function(a){return a[f.data("filter-by")]===f.data("filter-value")})),h.length&&(e=c.filter(e,function(a){var b=a.name+" "+a.description;return-1!==b.toLowerCase().indexOf(h)})),g.data("sort-by")&&(e=c.sortBy(e,g.data("sort-by")),"reverse"===g.data("sort-order")&&e.reverse()),a=c.groupBy(e,"available"),c.has(a,"false")&&(e=[].concat(a[!0],a[!1])),this.set("items",e),this},initialize:function(){var a=this.get("items");delete a.vaultpress,this.set("raw",a)}}),e}(this,jQuery,_,Backbone),this.jetpackModules=this.jetpackModules||{},window.jetpackModules.views=function(a,b,c,d,e){"use strict";var f={};return f.List_Table=d.View.extend({template:e.template("Jetpack_Modules_List_Table_Template"),updateUrl:function(){if(a.history.replaceState){var c=a.location.href.split("?")[0]+"?page=jetpack_modules",d=b(".subsubsub .current"),e=b(".button-group.filter-active .active"),f=b(".button-group.sort .active"),g=b("#srch-term-search-input").val();g.length&&(c+="&s="+encodeURIComponent(g)),d.hasClass("all")||(c+="&module_tag="+encodeURIComponent(d.data("title"))),e.data("filter-by")&&(c+="&"+encodeURIComponent(e.data("filter-by"))+"="+encodeURIComponent(e.data("filter-value"))),"name"!==f.data("sort-by")&&(c+="&sort_by="+encodeURIComponent(f.data("sort-by"))),a.history.replaceState({},"",c)}},render:function(){return this.model.filter_and_sort(),this.$el.html(this.template(this.model.attributes)),this.updateUrl(),this},initialize:function(){this.listenTo(this.model,"change",this.render)}}),f}(this,jQuery,_,Backbone,wp);