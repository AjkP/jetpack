var snowStorm=function(a,b){function c(a,b){return isNaN(b)&&(b=0),Math.random()*a+b}function d(a){return 1===parseInt(c(2),10)?-1*a:a}function e(){a.setTimeout(function(){g.start(!0)},20),g.events.remove(i?b:a,"mousemove",e)}function f(){g.excludeMobile&&l||(g.freezeOnBlur?g.events.add(i?b:a,"mousemove",e):e()),g.events.remove(a,"load",f)}this.autoStart=!0,this.flakesMax=60,this.flakesMaxActive=60,this.animationInterval=40,this.excludeMobile=!0,this.flakeBottom=null,this.followMouse=!0,this.snowColor="#fff",this.snowCharacter="&bull;",this.snowStick=!1,this.targetElement=null,this.useMeltEffect=!0,this.useTwinkleEffect=!1,this.usePositionFixed=!1,this.freezeOnBlur=!0,this.flakeLeftOffset=0,this.flakeRightOffset=0,this.flakeWidth=5,this.flakeHeight=5,this.vMaxX=2.5,this.vMaxY=2.5,this.zIndex=1e5;var g=this,h=this,i=navigator.userAgent.match(/msie/i),j=navigator.userAgent.match(/msie 6/i),k=navigator.appVersion.match(/windows 98/i),l=navigator.userAgent.match(/mobile|opera m(ob|in)/i),m=i&&"BackCompat"===b.compatMode,n=l||m||j,o=null,p=null,q=null,r=null,s=null,t=null,u=1,v=2,w=6,x=!1,y=function(){try{b.createElement("div").style.opacity="0.5"}catch(a){return!1}return!0}(),z=!1,A=b.createDocumentFragment();return this.timers=[],this.flakes=[],this.disabled=!1,this.active=!1,this.meltFrameCount=20,this.meltFrames=[],this.events=function(){function b(a){var b=g.call(a),c=b.length;return f?(b[1]="on"+b[1],c>3&&b.pop()):3===c&&b.push(!1),b}function c(a,b){var c=a.shift(),d=[h[b]];f?c[d](a[0],a[1]):c[d].apply(c,a)}function d(){c(b(arguments),"add")}function e(){c(b(arguments),"remove")}var f=!a.addEventListener&&a.attachEvent,g=Array.prototype.slice,h={add:f?"attachEvent":"addEventListener",remove:f?"detachEvent":"removeEventListener"};return{add:d,remove:e}}(),this.randomizeWind=function(){var a;if(s=d(c(g.vMaxX,.2)),t=c(g.vMaxY,.2),this.flakes)for(a=0;a<this.flakes.length;a++)this.flakes[a].active&&this.flakes[a].setVelocities()},this.scrollHandler=function(){var c;if(r=g.flakeBottom?0:parseInt(a.scrollY||b.documentElement.scrollTop||b.body.scrollTop,10),isNaN(r)&&(r=0),!x&&!g.flakeBottom&&g.flakes)for(c=g.flakes.length;c--;)0===g.flakes[c].active&&g.flakes[c].stick()},this.resizeHandler=function(){a.innerWidth||a.innerHeight?(o=a.innerWidth-16-g.flakeRightOffset,q=g.flakeBottom?g.flakeBottom:a.innerHeight):(o=(b.documentElement.clientWidth||b.body.clientWidth||b.body.scrollWidth)-(i?0:8)-g.flakeRightOffset,q=g.flakeBottom?g.flakeBottom:b.documentElement.clientHeight||b.body.clientHeight||b.body.scrollHeight),p=parseInt(o/2,10)},this.resizeHandlerAlt=function(){o=g.targetElement.offsetLeft+g.targetElement.offsetWidth-g.flakeRightOffset,q=g.flakeBottom?g.flakeBottom:g.targetElement.offsetTop+g.targetElement.offsetHeight,p=parseInt(o/2,10)},this.freeze=function(){var a;if(g.disabled)return!1;for(g.disabled=1,a=g.timers.length;a--;)clearInterval(g.timers[a])},this.resume=function(){return g.disabled?(g.disabled=0,void g.timerInit()):!1},this.toggleSnow=function(){g.flakes.length?(g.active=!g.active,g.active?(g.show(),g.resume()):(g.stop(),g.freeze())):g.start()},this.stop=function(){var c;for(this.freeze(),c=this.flakes.length;c--;)this.flakes[c].o.style.display="none";g.events.remove(a,"scroll",g.scrollHandler),g.events.remove(a,"resize",g.resizeHandler),g.freezeOnBlur&&(i?(g.events.remove(b,"focusout",g.freeze),g.events.remove(b,"focusin",g.resume)):(g.events.remove(a,"blur",g.freeze),g.events.remove(a,"focus",g.resume)))},this.show=function(){var a;for(a=this.flakes.length;a--;)this.flakes[a].o.style.display="block"},this.SnowFlake=function(a,d,e,f){var g=this,h=a;this.type=d,this.x=e||parseInt(c(o-20),10),this.y=isNaN(f)?-c(q)-12:f,this.vX=null,this.vY=null,this.vAmpTypes=[1,1.2,1.4,1.6,1.8],this.vAmp=this.vAmpTypes[this.type],this.melting=!1,this.meltFrameCount=h.meltFrameCount,this.meltFrames=h.meltFrames,this.meltFrame=0,this.twinkleFrame=0,this.active=1,this.fontSize=10+this.type/5*10,this.o=b.createElement("div"),this.o.innerHTML=h.snowCharacter,this.o.style.color=h.snowColor,this.o.style.position=x?"fixed":"absolute",this.o.style.width=h.flakeWidth+"px",this.o.style.height=h.flakeHeight+"px",this.o.style.fontFamily="arial,verdana",this.o.style.cursor="default",this.o.style.overflow="hidden",this.o.style.fontWeight="normal",this.o.style.zIndex=h.zIndex,A.appendChild(this.o),this.refresh=function(){return isNaN(g.x)||isNaN(g.y)?!1:(g.o.style.left=g.x+"px",void(g.o.style.top=g.y+"px"))},this.stick=function(){n||h.targetElement!==b.documentElement&&h.targetElement!==b.body?g.o.style.top=q+r-h.flakeHeight+"px":h.flakeBottom?g.o.style.top=h.flakeBottom+"px":(g.o.style.display="none",g.o.style.top="auto",g.o.style.bottom="0px",g.o.style.position="fixed",g.o.style.display="block")},this.vCheck=function(){g.vX>=0&&g.vX<.2?g.vX=.2:g.vX<0&&g.vX>-.2&&(g.vX=-.2),g.vY>=0&&g.vY<.2&&(g.vY=.2)},this.move=function(){var a,b=g.vX*u;g.x+=b,g.y+=g.vY*g.vAmp,g.x>=o||o-g.x<h.flakeWidth?g.x=0:0>b&&g.x-h.flakeLeftOffset<-h.flakeWidth&&(g.x=o-h.flakeWidth-1),g.refresh(),a=q+r-g.y,a<h.flakeHeight?(g.active=0,h.snowStick?g.stick():g.recycle()):(h.useMeltEffect&&g.active&&g.type<3&&!g.melting&&Math.random()>.998&&(g.melting=!0,g.melt()),h.useTwinkleEffect&&(g.twinkleFrame?(g.twinkleFrame--,g.o.style.visibility=g.twinkleFrame&&g.twinkleFrame%2===0?"hidden":"visible"):Math.random()>.9&&(g.twinkleFrame=parseInt(20*Math.random(),10))))},this.animate=function(){g.move()},this.setVelocities=function(){g.vX=s+c(.12*h.vMaxX,.1),g.vY=t+c(.12*h.vMaxY,.1)},this.setOpacity=function(a,b){return y?void(a.style.opacity=b):!1},this.melt=function(){h.useMeltEffect&&g.melting&&g.meltFrame<g.meltFrameCount?(g.setOpacity(g.o,g.meltFrames[g.meltFrame]),g.o.style.fontSize=g.fontSize-g.fontSize*(g.meltFrame/g.meltFrameCount)+"px",g.o.style.lineHeight=h.flakeHeight+2+.75*h.flakeHeight*(g.meltFrame/g.meltFrameCount)+"px",g.meltFrame++):g.recycle()},this.recycle=function(){g.o.style.display="none",g.o.style.position=x?"fixed":"absolute",g.o.style.bottom="auto",g.setVelocities(),g.vCheck(),g.meltFrame=0,g.melting=!1,g.setOpacity(g.o,1),g.o.style.padding="0px",g.o.style.margin="0px",g.o.style.fontSize=g.fontSize+"px",g.o.style.lineHeight=h.flakeHeight+2+"px",g.o.style.textAlign="center",g.o.style.verticalAlign="baseline",g.x=parseInt(c(o-h.flakeWidth-20),10),g.y=parseInt(-1*c(q),10)-h.flakeHeight,g.refresh(),g.o.style.display="block",g.active=1},this.recycle(),this.refresh()},this.snow=function(){var a,b=0,d=0,e=0,f=null;for(a=g.flakes.length;a--;)1===g.flakes[a].active?(g.flakes[a].move(),b++):0===g.flakes[a].active?d++:e++,g.flakes[a].melting&&g.flakes[a].melt();b<g.flakesMaxActive&&(f=g.flakes[parseInt(c(g.flakes.length),10)],0===f.active&&(f.melting=!0))},this.mouseMove=function(a){if(!g.followMouse)return!0;var b=parseInt(a.clientX,10);p>b?u=-v+b/p*v:(b-=p,u=b/p*v)},this.createSnow=function(a,b){var d;for(d=0;a>d;d++)g.flakes[g.flakes.length]=new g.SnowFlake(g,parseInt(c(w),10)),(b||d>g.flakesMaxActive)&&(g.flakes[g.flakes.length-1].active=-1);h.targetElement.appendChild(A)},this.timerInit=function(){g.timers=k?[setInterval(g.snow,3*g.animationInterval),setInterval(g.snow,g.animationInterval)]:[setInterval(g.snow,g.animationInterval)]},this.init=function(){var c;for(c=0;c<g.meltFrameCount;c++)g.meltFrames.push(1-c/g.meltFrameCount);g.randomizeWind(),g.createSnow(g.flakesMax),g.events.add(a,"resize",g.resizeHandler),g.events.add(a,"scroll",g.scrollHandler),g.freezeOnBlur&&(i?(g.events.add(b,"focusout",g.freeze),g.events.add(b,"focusin",g.resume)):(g.events.add(a,"blur",g.freeze),g.events.add(a,"focus",g.resume))),g.resizeHandler(),g.scrollHandler(),g.followMouse&&g.events.add(i?b:a,"mousemove",g.mouseMove),g.animationInterval=Math.max(20,g.animationInterval),g.timerInit()},this.start=function(a){if(z){if(a)return!0}else z=!0;if("string"==typeof g.targetElement){var c=g.targetElement;if(g.targetElement=b.getElementById(c),!g.targetElement)throw new Error('Snowstorm: Unable to get targetElement "'+c+'"')}g.targetElement||(g.targetElement=i?b.body:b.documentElement?b.documentElement:b.body),g.targetElement!==b.documentElement&&g.targetElement!==b.body&&(g.resizeHandler=g.resizeHandlerAlt),g.resizeHandler(),g.usePositionFixed=g.usePositionFixed&&!n,x=g.usePositionFixed,o&&q&&!g.disabled&&(g.init(),g.active=!0)},g.autoStart&&g.events.add(a,"load",f,!1),this}(window,document);