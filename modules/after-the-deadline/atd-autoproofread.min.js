function AtD_submit_check(a){AtD_proofread_click_count>0||(a.stopImmediatePropagation(),a.preventDefault(),"undefined"!=typeof tinyMCE&&tinyMCE.activeEditor&&!tinyMCE.activeEditor.isHidden()?tinyMCE.activeEditor.execCommand("mceWritingImprovementTool",AtD_submit_check_callback):(AtD_restore_if_proofreading(),AtD_check(AtD_submit_check_callback)))}function AtD_submit_check_callback(a){if(a=Number(a||0),AtD_unbind_proofreader_listeners(),0===a||AtD_proofread_click_count>1)AtD_update_post();else if(-1===a)alert(AtD.getLang("message_server_error","There was a problem communicating with the Proofreading service. Try again in one minute.")),AtD_update_post();else{var b,c=jQuery("#original_post_status").val();b="publish"===c?AtD.getLang("dialog_confirm_post_publish","The proofreader has suggestions for this post. Are you sure you want to publish it?\n\nPress OK to publish your post, or Cancel to view the suggestions and edit your post."):AtD.getLang("dialog_confirm_post_update","The proofreader has suggestions for this post. Are you sure you want to update it?\n\nPress OK to update your post, or Cancel to view the suggestions and edit your post."),confirm(b)?AtD_update_post():(AtD_bind_proofreader_listeners(),AtD_kill_autoproofread()),jQuery("#publish").removeClass("button-primary-disabled"),jQuery("#ajax-loading").hide()}}function AtD_kill_autoproofread(){jQuery("#publish").unbind("click.AtD_submit_check")}function AtD_update_post(){("undefined"==typeof tinyMCE||!tinyMCE.activeEditor||tinyMCE.activeEditor.isHidden())&&AtD_restore_if_proofreading(),jQuery("#publish").unbind("click.AtD_submit_check").click()}var AtD_proofread_click_count=0;jQuery(document).ready(function(a){var b=a("#original_post_status").val();"undefined"!=typeof AtD_check_when&&a("#content").length&&("publish"!==b&&AtD_check_when.onpublish||("publish"===b||"schedule"===b)&&AtD_check_when.onupdate)&&a("#publish").bind("click.AtD_submit_check",AtD_submit_check)});