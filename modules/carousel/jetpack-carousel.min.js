jQuery(document).ready(function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=110,u=a("body").css("overflow"),v=a("html").css("overflow"),w=85,x="";window.innerWidth<=760&&(t=Math.round(window.innerWidth/760*110),40>t&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(t=0));var y=function(a){switch(a.which){case 38:a.preventDefault(),e.scrollTop(e.scrollTop()-100);break;case 40:a.preventDefault(),e.scrollTop(e.scrollTop()+100);break;case 39:a.preventDefault(),d.jp_carousel("clearCommentTextAreaValue"),d.jp_carousel("next");break;case 37:case 8:a.preventDefault(),d.jp_carousel("clearCommentTextAreaValue"),d.jp_carousel("previous");break;case 27:a.preventDefault(),d.jp_carousel("clearCommentTextAreaValue"),e.jp_carousel("close")}},z=function(){clearTimeout(k),k=setTimeout(function(){d.jp_carousel("slides").jp_carousel("fitSlide",!0),d.jp_carousel("updateSlidePositions",!0),d.jp_carousel("fitMeta",!0)},200)},A=function(){if(!b){b=a("<div></div>").addClass("jp-carousel-overlay").css({position:"absolute",top:0,right:0,bottom:0,left:0});var k='<a class="jp-carousel-commentlink" href="#">'+jetpackCarouselStrings.comment+"</a>";1===Number(jetpackCarouselStrings.is_logged_in),k=a('<div class="jp-carousel-buttons">'+k+"</div>"),j=a("<h2></h2>"),l=a('<div class="jp-carousel-photo-info"></div>').append(j),p=a("<div></div>").addClass("jp-carousel-image-meta").css({"float":"right","margin-top":"20px",width:"250px"}),p.append(k).append("<ul class='jp-carousel-image-exif' style='display:none;'></ul>").append("<a class='jp-carousel-image-download' style='display:none;'></a>").append("<div class='jp-carousel-image-map' style='display:none;'></div>"),q=a("<div></div>").addClass("jp-carousel-titleanddesc").css({width:"100%","margin-top":p.css("margin-top")});var n='<div id="jp-carousel-comment-form-container">';jetpackCarouselStrings.local_comments_commenting_as&&jetpackCarouselStrings.local_comments_commenting_as.length&&(1!==Number(jetpackCarouselStrings.is_logged_in)&&1===Number(jetpackCarouselStrings.comment_registration)?n+='<div id="jp-carousel-comment-form-commenting-as">'+jetpackCarouselStrings.local_comments_commenting_as+"</div>":(n+='<form id="jp-carousel-comment-form">',n+='<textarea name="comment" class="jp-carousel-comment-form-field jp-carousel-comment-form-textarea" id="jp-carousel-comment-form-comment-field" placeholder="'+jetpackCarouselStrings.write_comment+'"></textarea>',n+='<div id="jp-carousel-comment-form-submit-and-info-wrapper">',n+='<div id="jp-carousel-comment-form-commenting-as">'+jetpackCarouselStrings.local_comments_commenting_as+"</div>",n+='<input type="submit" name="submit" class="jp-carousel-comment-form-button" id="jp-carousel-comment-form-button-submit" value="'+jetpackCarouselStrings.post_comment+'" />',n+='<span id="jp-carousel-comment-form-spinner">&nbsp;</span>',n+='<div id="jp-carousel-comment-post-results"></div>',n+="</div>",n+="</form>")),n+="</div>",r=a(n).css({width:"100%","margin-top":"20px",color:"#999"}),c=a("<div></div>").addClass("jp-carousel-comments").css({width:"100%",bottom:"10px","margin-top":"20px"});var o=a('<div id="jp-carousel-comments-loading"><span>'+jetpackCarouselStrings.loading_comments+"</span></div>").css({width:"100%",bottom:"10px","margin-top":"20px"}),u=a(window).width()-2*t-(p.width()+40);u+="px",s=a("<div></div>").addClass("jp-carousel-left-column-wrapper").css({width:Math.floor(u)}).append(q).append(r).append(c).append(o);var v=a("<div></div>").addClass("jp-carousel-fadeaway");h=a("<div></div>").addClass("jp-carousel-info").css({top:Math.floor(a(window).height()/100*w),left:t,right:t}).append(l).append(p),window.innerWidth<=760?(l.remove().insertAfter(q),h.prepend(s)):h.append(s);var A=a(window).height()-parseInt(h.css("top"),10)+"px";f=a("<div><span></span></div>").addClass("jp-carousel-next-button").css({right:"15px"}),g=a("<div><span></span></div>").addClass("jp-carousel-previous-button").css({left:0}),f.add(g).css({position:"fixed",top:"40px",bottom:A,width:t}),d=a("<div></div>").addClass("jp-carousel").css({position:"absolute",top:0,bottom:A,left:0,right:0}),m=a('<div class="jp-carousel-close-hint"><span>&times;</span></div>').css({position:"fixed"}),e=a("<div></div>").addClass("jp-carousel-wrap").addClass("jp-carousel-transitions"),"white"===jetpackCarouselStrings.background_color&&e.addClass("jp-carousel-light"),e.css({position:"fixed",top:0,right:0,bottom:0,left:0,"z-index":2147483647,"overflow-x":"hidden","overflow-y":"auto",direction:"ltr"}).hide().append(b).append(d).append(v).append(h).append(f).append(g).append(m).appendTo(a("body")).click(function(b){var c=a(b.target),f=c.parents("div.jp-carousel-wrap"),g=f.data("carousel-extra"),i=f.find("div.selected"),j=i.data("attachment-id");if(g=g||[],c.is(d)||c.parents().add(c).is(m))e.jp_carousel("close");else if(c.hasClass("jp-carousel-commentlink"))b.preventDefault(),b.stopPropagation(),a(window).unbind("keydown",y),e.animate({scrollTop:parseInt(h.position().top,10)},"fast"),a("#jp-carousel-comment-form-submit-and-info-wrapper").slideDown("fast"),a("#jp-carousel-comment-form-comment-field").focus();else if(c.hasClass("jp-carousel-comment-login")){var k=jetpackCarouselStrings.login_url+"%23jp-carousel-"+j;window.location.href=k}else if(c.parents("#jp-carousel-comment-form-container").length){var l=a("#jp-carousel-comment-form-comment-field").blur(function(){a(window).bind("keydown",y)}).focus(function(){a(window).unbind("keydown",y)}),n=a("#jp-carousel-comment-form-email-field").blur(function(){a(window).bind("keydown",y)}).focus(function(){a(window).unbind("keydown",y)}),o=a("#jp-carousel-comment-form-author-field").blur(function(){a(window).bind("keydown",y)}).focus(function(){a(window).unbind("keydown",y)}),p=a("#jp-carousel-comment-form-url-field").blur(function(){a(window).bind("keydown",y)}).focus(function(){a(window).unbind("keydown",y)});if(l&&l.attr("id")===c.attr("id"))a(window).unbind("keydown",y),a("#jp-carousel-comment-form-submit-and-info-wrapper").slideDown("fast");else if(c.is('input[type="submit"]')){b.preventDefault(),b.stopPropagation(),a("#jp-carousel-comment-form-spinner").spin("small","white");var q={action:"post_attachment_comment",nonce:jetpackCarouselStrings.nonce,blog_id:g.blog_id,id:j,comment:l.val()};if(!q.comment.length)return void d.jp_carousel("postCommentError",{field:"jp-carousel-comment-form-comment-field",error:jetpackCarouselStrings.no_comment_text});if(1!==Number(jetpackCarouselStrings.is_logged_in)&&(q.email=n.val(),q.author=o.val(),q.url=p.val(),1===Number(jetpackCarouselStrings.require_name_email))){if(!q.email.length||!q.email.match("@"))return void d.jp_carousel("postCommentError",{field:"jp-carousel-comment-form-email-field",error:jetpackCarouselStrings.no_comment_email});if(!q.author.length)return void d.jp_carousel("postCommentError",{field:"jp-carousel-comment-form-author-field",error:jetpackCarouselStrings.no_comment_author})}a.ajax({type:"POST",url:jetpackCarouselStrings.ajaxurl,data:q,dataType:"json",success:function(b){"approved"===b.comment_status?a("#jp-carousel-comment-post-results").slideUp("fast").html('<span class="jp-carousel-comment-post-success">'+jetpackCarouselStrings.comment_approved+"</span>").slideDown("fast"):"unapproved"===b.comment_status?a("#jp-carousel-comment-post-results").slideUp("fast").html('<span class="jp-carousel-comment-post-success">'+jetpackCarouselStrings.comment_unapproved+"</span>").slideDown("fast"):a("#jp-carousel-comment-post-results").slideUp("fast").html('<span class="jp-carousel-comment-post-error">'+jetpackCarouselStrings.comment_post_error+"</span>").slideDown("fast"),d.jp_carousel("clearCommentTextAreaValue"),d.jp_carousel("getComments",{attachment_id:j,offset:0,clear:!0}),a("#jp-carousel-comment-form-button-submit").val(jetpackCarouselStrings.post_comment),a("#jp-carousel-comment-form-spinner").spin(!1)},error:function(){d.jp_carousel("postCommentError",{field:"jp-carousel-comment-form-comment-field",error:jetpackCarouselStrings.comment_post_error})}})}}else c.parents(".jp-carousel-info").length||e.jp_carousel("next")}).bind("jp_carousel.afterOpen",function(){a(window).bind("keydown",y),a(window).bind("resize",z),d.opened=!0,z()}).bind("jp_carousel.beforeClose",function(){var b=a(window).scrollTop();a(window).unbind("keydown",y),a(window).unbind("resize",z),a(window).scrollTop(b)}).bind("jp_carousel.afterClose",function(){history.pushState?history.pushState("",document.title,window.location.pathname+window.location.search):(x="",window.location.hash=""),d.opened=!1}).on("transitionend.jp-carousel ",".jp-carousel-slide",function(b){if("transform"===b.originalEvent.propertyName){var c=(Date.now()-i)/1e3/b.originalEvent.elapsedTime;e.off("transitionend.jp-carousel"),c>=2&&a(".jp-carousel-transitions").removeClass("jp-carousel-transitions")}}),a(".jp-carousel-wrap").touchwipe({wipeLeft:function(a){a.preventDefault(),d.jp_carousel("next")},wipeRight:function(a){a.preventDefault(),d.jp_carousel("previous")},preventDefaultEvents:!1}),a(".jetpack-likes-widget-unloaded").each(function(){jetpackLikesWidgetQueue.push(this.id)}),f.add(g).click(function(a){a.preventDefault(),a.stopPropagation(),d.jp_carousel(f.is(this)?"next":"previous")})}},B={testForData:function(b){return b=a(b),!(!b.length||!b.data("carousel-extra"))},testIfOpened:function(){return!("undefined"==typeof d||"undefined"==typeof d.opened||!d.opened)},openOrSelectSlide:function(b){a(this).jp_carousel("testIfOpened")?d.jp_carousel("selectSlideAtIndex",b):a(this).jp_carousel("open",{start_index:b})},open:function(b){var c={items_selector:".gallery-item [data-attachment-id], .tiled-gallery-item [data-attachment-id]",start_index:0},f=a(this).data("carousel-extra");if(f&&(A(f),!d.jp_carousel("testIfOpened")))return u=a("body").css("overflow"),a("body").css("overflow","hidden"),v=a("html").css("overflow"),a("html").css("overflow","hidden"),jQuery(".slim-likes-widget").find("iframe").css("display","inline-block").css("width","60px"),e.data("carousel-extra",f),this.each(function(){var f=a(this);b&&a.extend(c,b),-1===c.start_index&&(c.start_index=0),e.trigger("jp_carousel.beforeOpen").fadeIn("fast",function(){e.trigger("jp_carousel.afterOpen"),d.jp_carousel("initSlides",f.find(c.items_selector),c.start_index).jp_carousel("selectSlideAtIndex",c.start_index)}),d.html("")})},selectSlideAtIndex:function(a){var b=this.jp_carousel("slides"),c=b.eq(a);return 0===c.length&&(c=b.eq(0)),d.jp_carousel("selectSlide",c,!1),this},close:function(){return a("body").css("overflow",u),a("html").css("overflow",v),e.trigger("jp_carousel.beforeClose").fadeOut("fast",function(){e.trigger("jp_carousel.afterClose")})},next:function(){var a=d.jp_carousel("nextSlide");e.animate({scrollTop:0},"fast"),a&&this.jp_carousel("selectSlide",a)},previous:function(){var a=d.jp_carousel("prevSlide");e.animate({scrollTop:0},"fast"),a&&this.jp_carousel("selectSlide",a)},resetButtons:function(b){b.data("liked")?a(".jp-carousel-buttons a.jp-carousel-like").addClass("liked").text(jetpackCarouselStrings.unlike):a(".jp-carousel-buttons a.jp-carousel-like").removeClass("liked").text(jetpackCarouselStrings.like)},selectedSlide:function(){return this.find(".selected")},setSlidePosition:function(a){return i=Date.now(),this.css({"-webkit-transform":"translate3d("+a+"px,0,0)","-moz-transform":"translate3d("+a+"px,0,0)","-ms-transform":"translate("+a+"px,0)","-o-transform":"translate("+a+"px,0)",transform:"translate3d("+a+"px,0,0)"})},updateSlidePositions:function(a){var b=this.jp_carousel("selectedSlide"),c=d.width(),e=b.width(),f=d.jp_carousel("prevSlide"),g=d.jp_carousel("nextSlide"),h=f.prev(),i=g.next(),j=Math.floor(.5*(c-e));b.jp_carousel("setSlidePosition",j).show(),d.jp_carousel("fitInfo",a);var k=o.is(b.prevAll())?1:-1;1===k?(i.is(f)||i.jp_carousel("setSlidePosition",c+g.width()).show(),h.is(g)||h.jp_carousel("setSlidePosition",-h.width()-e).show()):i.is(f)||i.jp_carousel("setSlidePosition",c+e).show(),f.jp_carousel("setSlidePosition",Math.floor(-f.width()+.75*t)).show(),g.jp_carousel("setSlidePosition",Math.ceil(c-.75*t)).show()},selectSlide:function(b,c){o=this.find(".selected").removeClass("selected");var f,g,h=d.jp_carousel("slides").css({position:"fixed"}),i=a(b).addClass("selected").css({position:"relative"}),k=i.data("attachment-id"),l=d.jp_carousel("prevSlide"),m=d.jp_carousel("nextSlide"),n=l.prev(),p=m.next();d.jp_carousel("loadFullImage",i),j.hide(),0===m.length&&h.length<=2?a(".jp-carousel-next-button").hide():a(".jp-carousel-next-button").show(),0===l.length&&h.length<=2?a(".jp-carousel-previous-button").hide():a(".jp-carousel-previous-button").show(),f=i.add(l).add(n).add(m).add(p).jp_carousel("loadSlide"),h.not(f).hide(),d.jp_carousel("updateSlidePositions",c),d.jp_carousel("resetButtons",i),e.trigger("jp_carousel.selectSlide",[i]),d.jp_carousel("getTitleDesc",{title:i.data("title"),desc:i.data("desc")}),d.jp_carousel("loadLikes",k),d.jp_carousel("updateLikesWidgetVisibility",k),m.length>0&&d.jp_carousel("loadLikes",m.data("attachment-id")),l.length>0&&d.jp_carousel("loadLikes",l.data("attachment-id"));var q=i.data("image-meta");d.jp_carousel("updateExif",q),d.jp_carousel("updateFullSizeLink",i),d.jp_carousel("updateMap",q),d.jp_carousel("testCommentsOpened",i.data("comments-opened")),d.jp_carousel("getComments",{attachment_id:k,offset:0,clear:!0}),a("#jp-carousel-comment-post-results").slideUp(),i.data("caption")?(g=a("<div />").text(i.data("caption")).html(),g===a("<div />").text(i.data("title")).html()&&a(".jp-carousel-titleanddesc-title").fadeOut("fast").empty(),g===a("<div />").text(i.data("desc")).html()&&a(".jp-carousel-titleanddesc-desc").fadeOut("fast").empty(),j.html(i.data("caption")).fadeIn("slow")):j.fadeOut("fast").empty(),a(m).add(l).each(function(){d.jp_carousel("loadFullImage",a(this))}),window.location.hash=x="#jp-carousel-"+k},slides:function(){return this.find(".jp-carousel-slide")},slideDimensions:function(){return{width:a(window).width()-2*t,height:Math.floor(a(window).height()/100*w-60)}},loadSlide:function(){return this.each(function(){var b=a(this);b.find("img").one("load",function(){b.jp_carousel("fitSlide",!1)})})},bestFit:function(){var a,b,c=d.jp_carousel("slideDimensions"),e=this.jp_carousel("originalDimensions"),f=e.width/e.height,g=1,h=1;return e.width>c.width&&(g=c.width/e.width),e.height>c.height&&(h=c.height/e.height),h>g?(a=c.width,b=Math.floor(a/f)):g>h?(b=c.height,a=Math.floor(b*f)):(a=e.width,b=e.height),{width:a,height:b}},fitInfo:function(){var a=this.jp_carousel("selectedSlide"),b=a.jp_carousel("bestFit");return l.css({left:Math.floor(.5*(h.width()-b.width)),width:Math.floor(b.width)}),this},fitMeta:function(b){var c={top:Math.floor(a(window).height()/100*w+5)+"px"},d={width:h.width()-(p.width()+80)+"px"};b?(h.animate(c),s.animate(d)):(h.animate(c),s.css(d))},fitSlide:function(){return this.each(function(){var b=a(this),c=b.jp_carousel("bestFit"),e="css",f=d.jp_carousel("slideDimensions");c.left=0,c.top=Math.floor(.5*(f.height-c.height))+40,b[e](c)})},texturize:function(b){return b=""+b,b=b.replace(/'/g,"&#8217;").replace(/&#039;/g,"&#8217;").replace(/[\u2019]/g,"&#8217;"),b=b.replace(/"/g,"&#8221;").replace(/&#034;/g,"&#8221;").replace(/&quot;/g,"&#8221;").replace(/[\u201D]/g,"&#8221;"),b=b.replace(/([\w]+)=&#[\d]+;(.+?)&#[\d]+;/g,'$1="$2"'),a.trim(b)},initSlides:function(b,c){b.length<2?a(".jp-carousel-next-button, .jp-carousel-previous-button").hide():a(".jp-carousel-next-button, .jp-carousel-previous-button").show(),b.each(function(){var b,c=a(this),e=c.data("orig-size")||"",f=d.jp_carousel("slideDimensions"),g=e.split(","),h=c.data("medium-file")||"",i=c.data("large-file")||"";e={width:parseInt(g[0],10),height:parseInt(g[1],10)},b=c.data("orig-file"),b=d.jp_carousel("selectBestImageSize",{orig_file:b,orig_width:e.width,orig_height:e.height,max_width:f.width,max_height:f.height,medium_file:h,large_file:i}),a(this).data("gallery-src",b)}),0!==c&&(a("<img/>")[0].src=a(b[c]).data("gallery-src"));var e=b.first().closest(".tiled-gallery.type-rectangular").length>0;return b.each(function(b){var f=a(this),g=f.data("attachment-id")||0,h=f.data("comments-opened")||0,i=f.data("image-meta")||{},j=f.data("orig-size")||"",k={width:f[0].naturalWidth,height:f[0].naturalHeight},l=f.data("image-title")||"",m=f.data("image-description")||"",n=f.parents("dl").find("dd.gallery-caption").html()||"",o=f.data("gallery-src")||"",p=f.data("medium-file")||"",q=f.data("large-file")||"",r=f.data("orig-file")||"",s=f.parents("div.tiled-gallery-item").find("div.tiled-gallery-caption").html();if(s&&(n=s),g&&j.length){l=d.jp_carousel("texturize",l),m=d.jp_carousel("texturize",m),n=d.jp_carousel("texturize",n);var t=a("<img/>").attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7").css("width","100%").css("height","100%"),u=a('<div class="jp-carousel-slide"></div>').hide().css({left:c>b?-1e3:d.width()}).append(t).appendTo(d).data("src",o).data("title",l).data("desc",m).data("caption",n).data("attachment-id",g).data("permalink",f.parents("a").attr("href")).data("orig-size",j).data("comments-opened",h).data("image-meta",i).data("medium-file",p).data("large-file",q).data("orig-file",r).data("thumb-size",k);e&&u.data("preview-image",f.attr("src")).css({"background-image":'url("'+f.attr("src")+'")',"background-size":"100% 100%","background-position":"center center"}),u.jp_carousel("fitSlide",!1)}}),this},selectBestImageSize:function(a){if("object"!=typeof a&&(a={}),"undefined"==typeof a.orig_file)return"";if("undefined"==typeof a.orig_width||"undefined"==typeof a.max_width)return a.orig_file;if("undefined"==typeof a.medium_file||"undefined"==typeof a.large_file)return a.orig_file;var b=a.medium_file.replace(/-([\d]+x[\d]+)\..+$/,"$1"),c=b!==a.medium_file?b.split("x"):[a.orig_width,0],d=parseInt(c[0],10),e=parseInt(c[1],10),f=a.large_file.replace(/-([\d]+x[\d]+)\..+$/,"$1"),g=f!==a.large_file?f.split("x"):[a.orig_width,0],h=parseInt(g[0],10),i=parseInt(g[1],10);return"undefined"!=typeof window.devicePixelRatio&&window.devicePixelRatio>1&&(a.max_width=a.max_width*window.devicePixelRatio,a.max_height=a.max_height*window.devicePixelRatio),h>=a.max_width||i>=a.max_height?a.large_file:d>=a.max_width||e>=a.max_height?a.medium_file:a.orig_file},originalDimensions:function(){var b=a(this).data("orig-size").split(",");return{width:parseInt(b[0],10),height:parseInt(b[1],10)}},format:function(a){return"object"!=typeof a&&(a={}),a.text&&"undefined"!=typeof a.text?a.replacements&&"undefined"!=typeof a.replacements?a.text.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a.replacements[c]?a.replacements[c]:b}):a.text:void 0},shutterSpeed:function(a){if(a>=1)return Math.round(a)+"s";for(var b=1,c=1,d=1,e=1e3;b!==a&&e-->0;)a>b?c+=1:(d+=1,c=parseInt(a*d,10)),b=c/d;return c>1&&(d=Math.round(d/c),c=1),1>=d?"1s":c+"/"+d+"s"},parseTitleDesc:function(b){return!b.match(" ")&&b.match("_")?"":(a(["CIMG","DSC_","DSCF","DSCN","DUW","GEDC","IMG","JD","MGP","PICT","Imagen","Foto","DSC","Scan","SANY","SAM","Screen Shot [0-9]+"]).each(function(a,c){var d=new RegExp("^"+c);return d.test(b)?void(b=""):void 0}),b)},getTitleDesc:function(b){var c,e="",f="",g="";c=a("div.jp-carousel-titleanddesc","div.jp-carousel-wrap"),c.hide(),e=d.jp_carousel("parseTitleDesc",b.title)||"",f=d.jp_carousel("parseTitleDesc",b.desc)||"",(e.length||f.length)&&(a("<div />").text(e).html()===a("<div />").text(f).html()&&(e=""),g=e.length?'<div class="jp-carousel-titleanddesc-title">'+e+"</div>":"",g+=f.length?'<div class="jp-carousel-titleanddesc-desc">'+f+"</div>":"",c.html(g).fadeIn("slow")),a("div#jp-carousel-comment-form-container").css("margin-top","20px"),a("div#jp-carousel-comments-loading").css("margin-top","20px")},updateLikesWidgetVisibility:function(b){"undefined"!=typeof jetpackLikesWidgetQueue&&a(".jp-carousel-buttons .jetpack-likes-widget-wrapper").css("display","none").each(function(){var c=a(this);return c.attr("data-attachment-id")==b?(c.css("display","inline-block"),!1):void 0})},loadLikes:function(b){var c=a(".jp-carousel-wrap").data("carousel-extra"),d=c.likes_blog_id;if(0===a("#like-post-wrapper-"+d+"-"+b).length){var e="http",f="http://wordpress.com";if(c.permalink.length){e=c.permalink.split(":")[0],"http"!==e&&"https"!==e&&(e="http");var g=c.permalink.split("/");g.length>=2&&(f=e+"://"+g[2])}var h=e+"://widgets.wp.com/likes/#blog_id="+encodeURIComponent(d)+"&post_id="+encodeURIComponent(b)+"&slim=1&origin="+encodeURIComponent(f);"en"!==jetpackCarouselStrings.lang&&(h+="&lang="+encodeURIComponent(jetpackCarouselStrings.lang));var i=a("<iframe class='post-likes-widget jetpack-likes-widget jetpack-resizeable'></iframe>").attr("name","like-post-frame-"+d+"-"+b).attr("src",h).css("display","inline-block"),j=a("<div/>").addClass("jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded slim-likes-widget").attr("id","like-post-wrapper-"+d+"-"+b).attr("data-src",h).attr("data-name","like-post-frame-"+d+"-"+b).attr("data-attachment-id",b).css("display","none").css("vertical-align","middle").append(i).append("<div class='post-likes-widget-placeholder'></div>");a(".jp-carousel-buttons").append(j)}},updateExif:function(b){if(!b||1!==Number(jetpackCarouselStrings.display_exif))return!1;var c=a("<ul class='jp-carousel-image-exif'></ul>");a.each(b,function(b,e){if(0!==parseFloat(e)&&e.length&&-1!==a.inArray(b,["camera","aperture","shutter_speed","focal_length"])){switch(b){case"focal_length":e+="mm";break;case"shutter_speed":e=d.jp_carousel("shutterSpeed",e);break;case"aperture":e="f/"+e}c.append("<li><h5>"+jetpackCarouselStrings[b]+"</h5>"+e+"</li>")}}),a("div.jp-carousel-image-meta ul.jp-carousel-image-exif").replaceWith(c)},updateFullSizeLink:function(b){if(!b||!b.data)return!1;var c=b.data("orig-file").replace(/\?.+$/,""),e=b.data("orig-size").split(","),f=a("<a>"+d.jp_carousel("format",{text:jetpackCarouselStrings.download_original,replacements:e})+"</a>").addClass("jp-carousel-image-download").attr("href",c).attr("target","_blank");a("div.jp-carousel-image-meta a.jp-carousel-image-download").replaceWith(f)},updateMap:function(b){if(b.latitude&&b.longitude&&1===Number(jetpackCarouselStrings.display_geo)){var c=b.latitude,d=b.longitude,e=a("div.jp-carousel-image-meta","div.jp-carousel-wrap"),f=a("<div></div>"),g="&scale=2&style=feature:all|element:all|invert_lightness:true|hue:0x0077FF|saturation:-50|lightness:-5|gamma:0.91";f.addClass("jp-carousel-image-map").html('<img width="154" height="154" src="https://maps.googleapis.com/maps/api/staticmap?							center='+c+","+d+"&							zoom=8&							size=154x154&							sensor=false&							markers=size:medium%7Ccolor:blue%7C"+c+","+d+g+'" class="gmap-main" />													<div class="gmap-topright"><div class="imgclip"><img width="175" height="154" src="https://maps.googleapis.com/maps/api/staticmap?							center='+c+","+d+"&							zoom=3&							size=175x154&							sensor=false&							markers=size:small%7Ccolor:blue%7C"+c+","+d+g+'"c /></div></div>													').prependTo(e)}},testCommentsOpened:function(b){1===parseInt(b,10)?(a(".jp-carousel-buttons").fadeIn("fast"),r.fadeIn("fast")):(a(".jp-carousel-buttons").fadeOut("fast"),r.fadeOut("fast"))},getComments:function(b){if(clearInterval(n),"object"==typeof b&&"undefined"!=typeof b.attachment_id&&b.attachment_id){(!b.offset||"undefined"==typeof b.offset||b.offset<1)&&(b.offset=0);var c=a(".jp-carousel-comments"),e=a("#jp-carousel-comments-loading").show();b.clear&&c.hide().empty(),a.ajax({type:"GET",url:jetpackCarouselStrings.ajaxurl,dataType:"json",data:{action:"get_attachment_comments",nonce:jetpackCarouselStrings.nonce,id:b.attachment_id,offset:b.offset},success:function(f){b.clear&&c.fadeOut("fast").empty(),a(f).each(function(){var e=a("<div></div>").addClass("jp-carousel-comment").attr("id","jp-carousel-comment-"+this.id).html('<div class="comment-gravatar">'+this.gravatar_markup+'</div><div class="comment-author">'+this.author_markup+'</div><div class="comment-date">'+this.date_gmt+'</div><div class="comment-content">'+this.content+"</div>");c.append(e),clearInterval(n),n=setInterval(function(){a(".jp-carousel-overlay").height()-150<a(".jp-carousel-wrap").scrollTop()+a(window).height()&&(d.jp_carousel("getComments",{attachment_id:b.attachment_id,offset:b.offset+10,clear:!1}),clearInterval(n))},300)});var g=a(".jp-carousel div.selected");return g&&g.data&&g.data("attachment-id")!=b.attachment_id?(c.fadeOut("fast"),void c.empty()):(a(".jp-carousel-overlay").height(a(window).height()+q.height()+r.height()+(c.height()>0?c.height():p.height())+200),c.show(),void e.hide())},error:function(a,b,d){console.log("Comment get fail...",a,b,d),c.fadeIn("fast"),e.fadeOut("fast")}})}},postCommentError:function(b){"object"!=typeof b&&(b={}),b.field&&"undefined"!=typeof b.field&&b.error&&"undefined"!=typeof b.error&&(a("#jp-carousel-comment-post-results").slideUp("fast").html('<span class="jp-carousel-comment-post-error">'+b.error+"</span>").slideDown("fast"),a("#jp-carousel-comment-form-spinner").spin(!1))},setCommentIframeSrc:function(b){var c=a("#jp-carousel-comment-iframe");c&&c.length&&(c.attr("src",c.attr("src").replace(/(postid=)\d+/,"$1"+b)),c.attr("src",c.attr("src").replace(/(%23.+)?$/,"%23jp-carousel-"+b)))},clearCommentTextAreaValue:function(){var b=a("#jp-carousel-comment-form-comment-field");b&&b.val("")},nextSlide:function(){var a=this.jp_carousel("slides"),b=this.jp_carousel("selectedSlide");return 0===b.length||a.length>2&&b.is(a.last())?a.first():b.next()},prevSlide:function(){var a=this.jp_carousel("slides"),b=this.jp_carousel("selectedSlide");return 0===b.length||a.length>2&&b.is(a.first())?a.last():b.prev()},loadFullImage:function(b){var c=b.find("img:first");c.data("loaded")||(c.on("load.jetpack",function(){c.off("load.jetpack"),a(this).closest(".jp-carousel-slide").css("background-image","")}),!b.data("preview-image")||b.data("thumb-size")&&b.width()>b.data("thumb-size").width?c.attr("src",c.closest(".jp-carousel-slide").data("src")):c.attr("src",b.data("preview-image")),c.data("loaded",1))}};a.fn.jp_carousel=function(b){return B[b]?B[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.jp_carousel"):B.open.apply(this,arguments)},a(document.body).on("click","div.gallery,div.tiled-gallery",function(b){a(this).jp_carousel("testForData",b.currentTarget)&&(a(b.target).parent().hasClass("gallery-caption")||(b.preventDefault(),a(this).jp_carousel("open",{start_index:a(this).find(".gallery-item, .tiled-gallery-item").index(a(b.target).parents(".gallery-item, .tiled-gallery-item"))})))}),a(window).on("hashchange",function(){if(window.location.hash&&window.location.hash.match(/jp-carousel-(\d+)/)&&window.location.hash!==x){x=window.location.hash;var b=a("div.gallery, div.tiled-gallery"),c=-1,d=window.location.hash.match(/jp-carousel-(\d+)/);a(this).jp_carousel("testForData",b)&&(d=parseInt(d[1],10),b.find("img").each(function(b,e){return d&&Number(a(e).data("attachment-id"))===d?(c=b,!1):void 0}),-1!==c&&b.jp_carousel("openOrSelectSlide",c))}}),window.location.hash&&a(window).trigger("hashchange")}),function(a){a.fn.touchwipe=function(b){var c={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};return b&&a.extend(c,b),this.each(function(){function a(){this.removeEventListener("touchmove",b),e=null,g=!1}function b(b){if(c.preventDefaultEvents&&b.preventDefault(),g){var d=b.touches[0].pageX,h=b.touches[0].pageY,i=e-d,j=f-h;Math.abs(i)>=c.min_move_x?(a(),i>0?c.wipeLeft(b):c.wipeRight(b)):Math.abs(j)>=c.min_move_y&&(a(),j>0?c.wipeDown(b):c.wipeUp(b))}}function d(a){1===a.touches.length&&(e=a.touches[0].pageX,f=a.touches[0].pageY,g=!0,this.addEventListener("touchmove",b,!1))}var e,f,g=!1;"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",d,!1)}),this}}(jQuery);