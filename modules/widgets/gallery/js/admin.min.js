!function(a){function b(){a(".widget-inside .gallery-widget-style").each(function(){var b=a(this).val(),c=a(this).parents("form");switch(b){case"slideshow":c.find(".gallery-widget-link-wrapper").hide(),c.find(".gallery-widget-columns-wrapper").hide();break;default:c.find(".gallery-widget-link-wrapper").show(),c.find(".gallery-widget-columns-wrapper").show()}})}function c(a,b){b.empty();var c=_wpGalleryWidgetAdminSettings.thumbSize;a.each(function(a){var d=a.get("url")+"?w="+c+"&h="+c+"&crop=true",e='<img src="'+d+'" alt="'+a.get("title")+'" 				title="'+a.get("title")+'" width="'+c+'" height="'+c+'" class="thumb" />';b.append(e)})}function d(a){if(!a)return null;var b=wp.shortcode.next("gallery",'[gallery ids="'+a+'"]');b=b.shortcode;var c=wp.media.gallery.attachments(b);return c}function e(a){var b=new wp.media.model.Selection(a.models,{props:a.props.toJSON(),multiple:!0});return b.gallery=a.gallery,b.more().done(function(){b.props.set({query:!1}),b.unmirror(),b.props.unset("orderby")}),b}function f(a){var b=new wp.media.view.MediaFrame.GalleryWidget(a);return b.on("update",function(a){var d=b.state();if(a=a||d.get("selection")){var e=a.map(function(a){return a.get("id")}),f=e.join(",");g.val(f),c(a,h)}},this),b.setState(b.options.state),b}var g,h;a(function(){a(".widgets-holder-wrap, .editwidget").on("click",".gallery-widget-choose-images",function(b){b.preventDefault();var c=a(this).closest("form");g=c.find(".gallery-widget-ids"),h=c.find(".gallery-widget-thumbs");var i=g.val(),j=d(i),k=null,l=!1;if(j){var k=e(j);l=!0}var m={state:"gallery-edit",title:wp.media.view.l10n.addMedia,multiple:!0,editing:l,selection:k},n=f(m);n.open()}),a(".widget-inside").on("change",".gallery-widget-style",b),b()});{var i,j=wp.media;j.model.Attachment,j.model.Attachments,j.model.Query}i=j.view.l10n="undefined"==typeof _wpMediaViewsL10n?{}:_wpMediaViewsL10n,j.view.MediaFrame.GalleryWidget=j.view.MediaFrame.Post.extend({createStates:function(){var a=this.options;"CollectionEdit"in j.controller?this.states.add([new j.controller.CollectionEdit({type:"image",collectionType:"gallery",title:i.editGalleryTitle,SettingsView:j.view.Settings.Gallery,library:a.selection,editing:a.editing,menu:"gallery"}),new j.controller.CollectionAdd({type:"image",collectionType:"gallery",title:i.addToGalleryTitle})]):("WidgetGalleryEdit"in j.controller||(j.controller.WidgetGalleryEdit=j.controller.GalleryEdit.extend({gallerySettings:function(){}})),this.states.add([new j.controller.WidgetGalleryEdit({library:a.selection,editing:a.editing,menu:"gallery"}),new j.controller.GalleryAdd({})]))}})}(jQuery);