!function(a){var b={modes:{"default":"text/css",less:"text/x-less",sass:"text/x-scss"},init:function(){this.$textarea=a("#safecss"),this.editor=window.CodeMirror.fromTextArea(this.$textarea.get(0),{mode:this.getMode(),lineNumbers:!0,tabSize:2,indentWithTabs:!0,lineWrapping:!0}),this.setEditorHeight()},addListeners:function(){a(window).on("resize",_.bind(_.debounce(this.setEditorHeight,100),this)),this.editor.on("change",_.bind(function(a){this.$textarea.val(a.getValue())},this)),a("#preprocessor_choices").change(_.bind(function(){this.editor.setOption("mode",this.getMode())},this))},setEditorHeight:function(){var b=a("html").height()-a(this.editor.getWrapperElement()).offset().top;this.editor.setSize(null,b)},getMode:function(){var b=a("#preprocessor_choices").val();return""!==b&&this.modes[b]||(b="default"),this.modes[b]}};a(document).ready(_.bind(b.init,b))}(jQuery);