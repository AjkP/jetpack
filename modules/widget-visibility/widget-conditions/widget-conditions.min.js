jQuery(function(a){function b(b){if(!a("body").hasClass("wp-customizer"))if(b.hasClass("expanded")){b.attr("style")&&b.data("original-style",b.attr("style"));var c=b.width();if(400>c){var d=400-c;b.css("position","relative").css("left","-"+d+"px").css("width","400px")}}else b.data("original-style")?b.attr("style",b.data("original-style")).data("original-style",null):b.removeAttr("style")}a("a.display-options").each(function(){var b=a(this),c=b.closest("div.widget");b.insertBefore(c.find("input.widget-control-save")),b.parent().removeClass("widget-control-noform").find(".spinner").remove().css("float","left").prependTo(b.parent())}),a("div#widgets-right, form#customize-controls").on("click","a.add-condition",function(b){b.preventDefault();var c=a(this).closest("div.condition"),d=c.clone().insertAfter(c);d.find("select.conditions-rule-major").val(""),d.find("select.conditions-rule-minor").html("").attr("disabled")}).on("click","a.display-options",function(c){c.preventDefault();var d=a(this),e=d.closest("div.widget");e.find("div.widget-conditional").toggleClass("widget-conditional-hide"),a(this).toggleClass("active"),e.toggleClass("expanded"),b(e),e.find("input[name=widget-conditions-visible]").val(a(this).hasClass("active")?"1":"0")}),a("div#widgets-right, form#customize-controls").on("click","a.delete-condition",function(b){b.preventDefault();var c=a(this).closest("div.condition");c.is(":first-child")&&c.is(":last-child")?(a(this).closest("div.widget").find("a.display-options").click(),c.find("select.conditions-rule-major").val("").change()):c.detach()}).on("click","div.widget-top",function(){var c=a(this).closest("div.widget"),d=c.find("a.display-options");d.hasClass("active")&&d.attr("opened","true"),d.attr("opened")&&(d.removeAttr("opened"),c.toggleClass("expanded"),b(c))}),a(document).on("change","select.conditions-rule-major",function(){var b=a(this),c=b.siblings("select.conditions-rule-minor:first");if(b.val()){c.html("").append(a("<option/>").text(c.data("loading-text")));var d={action:"widget_conditions_options",major:b.val()};jQuery.post(ajaxurl,d,function(a){c.html(a).removeAttr("disabled")})}else b.siblings("select.conditions-rule-minor").attr("disabled","disabled").html("")})});